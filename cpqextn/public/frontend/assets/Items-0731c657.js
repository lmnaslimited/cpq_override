import{_ as N}from"./CustomActions-fd13eb50.js";import{_ as j}from"./LayoutHeader-fe1f254b.js";import{_ as D}from"./ViewControls-57997287.js";import{m as B,h as S,i as P,j as L,s as E,k as H,l as v,r as U,b as l,c as m,d as u,w as p,u as d,F as M,f as O,g as c,n as h,p as f,e as I,t as A,q as J}from"./index-d057f33a.js";import{_ as G,H as W,a as K,b as Q,c as X,d as Y,e as Z}from"./ListBulkActions-4e019d04.js";import{I as ee}from"./IndicatorIcon-c103771d.js";import{_ as te}from"./MultipleAvatar-9bfce769.js";import{_ as oe}from"./ListRows-b9dc126d.js";import{b as F,_ as le}from"./UserAvatar-e49c5291.js";import{_ as se}from"./Dropdown.vue_vue_type_script_setup_true_lang-bf1a1150.js";import{_ as ae}from"./ListFooter-8173dedc.js";import{_ as ne}from"./Breadcrumbs.vue_vue_type_script_setup_true_lang-7b2c30ed.js";import"./settings-0248bbea.js";import"./GroupByIcon-a605d43f.js";import"./views-fe454bb1.js";import"./NestedPopover-545deb9d.js";import"./EditIcon-a130850d.js";import"./PinIcon-1aaff3df.js";import"./FadedScrollableDiv-9f66556a.js";import"./DetailsIcon-ef5d1277.js";import"./DragVerticalIcon-87005af9.js";import"./AssignmentModal-7b9977f2.js";const ie={key:0,class:"flex items-center"},re={key:0},ue={key:1},de={key:2},me={key:3},pe=["onClick"],ce={key:1},fe={key:2,class:"truncate text-base"},ye={key:3},ke=["onClick"],_e={__name:"ItemsListView",props:B({rows:{type:Array,required:!0},columns:{type:Array,required:!0},options:{type:Object,default:()=>({selectable:!0,showTooltip:!0,resizeColumn:!1,totalCount:0,rowCount:0})}},{modelValue:{},modelModifiers:{},list:{},listModifiers:{}}),emits:B(["loadMore","updatePageCount","columnWidthUpdated","applyFilter","applyLikeFilter","likeDoc"],["update:modelValue","update:list"]),setup(r,{expose:x,emit:w}){const o=w,C=S(),y=P(r,"modelValue"),k=P(r,"list"),V=L(()=>{var e,a;return!!((a=(e=k.value.params)==null?void 0:e.filters)!=null&&a._liked_by)}),{user:$}=E();function _(e){if(e)return JSON.parse(e).includes($)}H(y,(e,a)=>{e!==a&&o("updatePageCount",e)});const t=v(null);return x({customListActions:L(()=>{var e;return(e=t.value)==null?void 0:e.customListActions})}),(e,a)=>{const g=U("Button"),R=U("Badge"),T=U("FormControl");return l(),m(M,null,[u(d(Y),{class:h(e.$attrs.class),columns:r.columns,rows:r.rows,options:{getRowRoute:n=>({name:"Item",params:{itemId:n.name},query:{view:d(C).query.view,viewType:d(C).params.viewType}}),selectable:r.options.selectable,showTooltip:r.options.showTooltip,resizeColumn:r.options.resizeColumn},"row-key":"name"},{default:p(()=>[u(d(G),{class:"sm:mx-5 mx-3",onColumnWidthUpdated:a[1]||(a[1]=n=>o("columnWidthUpdated"))},{default:p(()=>[(l(!0),m(M,null,O(r.columns,n=>(l(),c(d(K),{key:n.key,item:n,onColumnWidthUpdated:i=>o("columnWidthUpdated",n)},{default:p(()=>[n.key=="_liked_by"?(l(),c(g,{key:0,variant:"ghosted",class:h(["!h-4",V.value?"fill-red-500":"fill-white"]),onClick:a[0]||(a[0]=()=>o("applyLikeFilter"))},{default:p(()=>[u(W,{class:"h-4 w-4"})]),_:1},8,["class"])):f("",!0)]),_:2},1032,["item","onColumnWidthUpdated"]))),128))]),_:1}),u(oe,{rows:r.rows},{default:p(({idx:n,column:i,item:s,row:q})=>[i.key==="_assign"?(l(),m("div",ie,[u(te,{avatars:s,size:"sm",onClick:z=>o("applyFilter",{event:z,idx:n,column:i,item:s,firstColumn:r.columns[0]})},null,8,["avatars","onClick"])])):(l(),c(d(Q),{key:1,item:s},{prefix:p(()=>[i.key==="status"?(l(),m("div",re,[u(ee,{class:h(s.color)},null,8,["class"])])):i.key==="name"?(l(),m("div",ue,[s.label?(l(),c(d(F),{key:0,class:"flex items-center",image:s.image,label:s.image_label,size:"sm"},null,8,["image","label"])):f("",!0)])):i.key==="organization"?(l(),m("div",de,[s?(l(),c(d(F),{key:0,class:"flex items-center",image:s,label:s,size:"sm"},null,8,["image","label"])):f("",!0)])):i.key==="owner"?(l(),m("div",me,[s.full_name?(l(),c(d(F),{key:0,class:"flex items-center",image:s.user_image,label:s.full_name,size:"sm"},null,8,["image","label"])):f("",!0)])):f("",!0)]),default:p(({label:z})=>[["modified","creation","first_response_time","first_responded_on","response_by"].includes(i.key)?(l(),m("div",{key:0,class:"truncate text-base",onClick:b=>o("applyFilter",{event:b,idx:n,column:i,item:s,firstColumn:r.columns[0]})},[u(d(le),{text:s.label},{default:p(()=>[I("div",null,A(s.timeAgo),1)]),_:2},1032,["text"])],8,pe)):i.key==="_liked_by"?(l(),m("div",ce,[i.key=="_liked_by"?(l(),c(g,{key:0,variant:"ghosted",class:h(_(s)?"fill-red-500":"fill-white"),onClick:J(()=>o("likeDoc",{name:q.name,liked:_(s)}),["stop","prevent"])},{default:p(()=>[u(W,{class:"h-4 w-4"})]),_:2},1032,["class","onClick"])):f("",!0)])):i.key==="sla_status"?(l(),m("div",fe,[s.value?(l(),c(R,{key:0,variant:"subtle",theme:s.color,size:"md",label:s.value,onClick:b=>o("applyFilter",{event:b,idx:n,column:i,item:s,firstColumn:r.columns[0]})},null,8,["theme","label","onClick"])):f("",!0)])):i.type==="Check"?(l(),m("div",ye,[u(T,{type:"checkbox",modelValue:s,disabled:!0,class:"text-gray-900"},null,8,["modelValue"])])):(l(),m("div",{key:4,class:"truncate text-base",onClick:b=>o("applyFilter",{event:b,idx:n,column:i,item:s,firstColumn:r.columns[0]})},A(z),9,ke))]),_:2},1032,["item"]))]),_:1},8,["rows"]),u(d(X),null,{actions:p(({selections:n,unselectAll:i})=>[u(d(se),{options:t.value.bulkActions(n,i)},{default:p(()=>[u(g,{icon:"more-horizontal",variant:"ghost"})]),_:2},1032,["options"])]),_:1})]),_:1},8,["class","columns","rows","options"]),y.value?(l(),c(d(ae),{key:0,class:"border-t sm:px-5 px-3 py-2",modelValue:y.value,"onUpdate:modelValue":a[2]||(a[2]=n=>y.value=n),options:{rowCount:r.options.rowCount,totalCount:r.options.totalCount},onLoadMore:a[3]||(a[3]=n=>o("loadMore"))},null,8,["modelValue","options"])):f("",!0),u(Z,{ref_key:"listBulkActionsRef",ref:t,modelValue:k.value,"onUpdate:modelValue":a[4]||(a[4]=n=>k.value=n),doctype:"Item"},null,8,["modelValue"])],64)}}},ve={key:1,class:"flex h-full items-center justify-center"},Ce={class:"flex flex-col items-center gap-3 text-xl font-medium text-gray-500"},De={__name:"Items",setup(r){const x=[{label:__("Items"),route:{name:"Items"}}],w=v(null),o=v({}),C=v(1),y=v(1),k=v(20),V=v(null),$=L(()=>{var _,t;return(t=(_=o.value)==null?void 0:_.data)!=null&&t.data?o.value.data.data.map(e=>{let a={};return o.value.data.rows.forEach(g=>{a[g]=e[g]}),a}):[]});return(_,t)=>(l(),m(M,null,[u(j,null,{"left-header":p(()=>[u(d(ne),{items:x})]),"right-header":p(()=>{var e;return[(e=w.value)!=null&&e.customListActions?(l(),c(N,{key:0,actions:w.value.customListActions},null,8,["actions"])):f("",!0)]}),_:1}),u(D,{ref_key:"viewControls",ref:V,modelValue:o.value,"onUpdate:modelValue":t[0]||(t[0]=e=>o.value=e),loadMore:C.value,"onUpdate:loadMore":t[1]||(t[1]=e=>C.value=e),resizeColumn:y.value,"onUpdate:resizeColumn":t[2]||(t[2]=e=>y.value=e),updatedPageCount:k.value,"onUpdate:updatedPageCount":t[3]||(t[3]=e=>k.value=e),doctype:"Item"},null,8,["modelValue","loadMore","resizeColumn","updatedPageCount"]),o.value.data&&$.value.length?(l(),c(_e,{key:0,ref_key:"itemsListView",ref:w,modelValue:o.value.data.page_length_count,"onUpdate:modelValue":t[4]||(t[4]=e=>o.value.data.page_length_count=e),list:o.value,"onUpdate:list":t[5]||(t[5]=e=>o.value=e),rows:$.value,columns:o.value.data.columns,options:{showTooltip:!1,resizeColumn:!0,rowCount:o.value.data.row_count,totalCount:o.value.data.total_count},onLoadMore:t[6]||(t[6]=()=>C.value++),onColumnWidthUpdated:t[7]||(t[7]=()=>y.value++),onUpdatePageCount:t[8]||(t[8]=e=>k.value=e),onApplyFilter:t[9]||(t[9]=e=>V.value.applyFilter(e))},null,8,["modelValue","list","rows","columns","options"])):o.value.data?(l(),m("div",ve,[I("div",Ce,[I("span",null,A(_.__("No Item Found")),1)])])):f("",!0)],64))}};export{De as default};
//# sourceMappingURL=Items-0731c657.js.map
