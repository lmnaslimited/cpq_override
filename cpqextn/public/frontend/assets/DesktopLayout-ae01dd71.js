import{_ as F}from"./Section-1565df09.js";import{E as H}from"./Email2Icon-e2d51718.js";import{P as W}from"./PinIcon-1aaff3df.js";import{_ as q,a as N,C as U}from"./CallUI-ba52b7b2.js";import{L as B}from"./LeadsIcon-520efb00.js";import{D as A}from"./DealsIcon-15068e15.js";import{C as D}from"./ContactsIcon-f7db653d.js";import{O as P}from"./OrganizationsIcon-321405d1.js";import{N as S}from"./NoteModal-46cc4fb1.js";import{_ as K,b as s,c as r,e,l as Y,o as G,a as M,r as k,u as t,t as h,d as n,w as f,F as I,f as z,g as b,n as x,p as C,z as T,j as J,B as Q,cK as X,D as Z,T as ee,cL as te,R as se}from"./index-d057f33a.js";import{P as O}from"./PhoneIcon-d45a62b6.js";import{n as u,N as j}from"./notifications-53bb9738.js";import{W as oe}from"./WhatsAppIcon-3fd08937.js";import{M as ae}from"./MarkAsDoneIcon-90d7583e.js";import{g as ne,_ as V,a as le,t as ie}from"./UserAvatar-e49c5291.js";import{o as re,a as ce}from"./Dropdown.vue_vue_type_script_setup_true_lang-bf1a1150.js";import{v as de}from"./views-fe454bb1.js";import"./FileUploader-1f4a7957.js";import"./Fields-6a34413d.js";import"./EditIcon-a130850d.js";import"./NestedPopover-545deb9d.js";import"./IndicatorIcon-c103771d.js";import"./settings-0248bbea.js";import"./contacts-62bb23c5.js";import"./ArrowUpRightIcon-f89323ee.js";const ue={},_e={width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function me(v,_){return s(),r("svg",_e,_[0]||(_[0]=[e("path",{d:"M10.875 9.06223L3 9.06232",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),e("path",{d:"M6.74537 5.31699L3 9.06236L6.74527 12.8076",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),e("path",{d:"M14.1423 4L14.1423 14.125",stroke:"currentColor","stroke-linecap":"round"},null,-1)]))}const pe=K(ue,[["render",me]]),fe={class:"flex h-screen flex-col"},he={class:"z-20 flex items-center justify-between border-b bg-white px-5 py-2.5"},ge={class:"text-base font-medium"},xe={class:"flex gap-1"},be={key:0,class:"divide-y overflow-auto text-base"},ve={class:"mt-1 flex items-center gap-2.5"},ye=["innerHTML"],ke={key:1,class:"mb-2 space-x-1 leading-5 text-gray-600"},Ce={class:"font-medium text-gray-900"},we={class:"font-medium text-gray-900"},$e={class:"text-sm text-gray-600"},Le={key:1,class:"flex flex-1 flex-col items-center justify-center gap-2"},Ne={class:"text-lg font-medium text-gray-500"},Ie={__name:"Notifications",setup(v){const{$socket:_}=ne(),m=Y(null);re(m,()=>{u().visible&&y()},{ignore:["#notifications-btn"]});function y(){u().toggle()}function c(o){T("notification_mark_as_read"),u().mark_doc_as_read(o)}function w(){T("notification_mark_all_as_read"),u().mark_as_read.reload()}G(()=>{_.off("crm_notification")}),M(()=>{_.on("crm_notification",()=>{u().notifications.reload()})});function $(o){let p={leadId:o.reference_name};return o.route_name==="Deal"&&(p={dealId:o.reference_name}),{name:o.route_name,params:p,hash:o.hash}}return M(()=>{}),(o,p)=>{var d;const a=k("Button"),l=k("FeatherIcon"),L=k("RouterLink");return t(u)().visible?(s(),r("div",{key:0,ref_key:"target",ref:m,class:"absolute z-20 h-screen bg-white transition-all duration-300 ease-in-out",style:{"box-shadow":"8px 0px 8px rgba(0, 0, 0, 0.1)","max-width":"350px","min-width":"350px",left:"calc(100% + 1px)"}},[e("div",fe,[e("div",he,[e("div",ge,h(o.__("Notifications")),1),e("div",xe,[n(t(V),{text:o.__("Mark all as read")},{default:f(()=>[e("div",null,[n(a,{variant:"ghost",onClick:p[0]||(p[0]=()=>w())},{icon:f(()=>[n(ae,{class:"h-4 w-4"})]),_:1})])]),_:1},8,["text"]),n(t(V),{text:o.__("Close")},{default:f(()=>[e("div",null,[n(a,{variant:"ghost",onClick:p[1]||(p[1]=()=>y())},{icon:f(()=>[n(l,{name:"x",class:"h-4 w-4"})]),_:1})])]),_:1},8,["text"])])]),(d=t(u)().allNotifications)!=null&&d.length?(s(),r("div",be,[(s(!0),r(I,null,z(t(u)().allNotifications,i=>(s(),b(L,{key:i.comment,to:$(i),class:"flex cursor-pointer items-start gap-2.5 px-4 py-2.5 hover:bg-gray-100",onClick:g=>c(i.comment||i.notification_type_doc)},{default:f(()=>[e("div",ve,[e("div",{class:x(["size-[5px] rounded-full",[i.read?"bg-transparent":"bg-gray-900"]])},null,2),i.type=="WhatsApp"?(s(),b(oe,{key:0,class:"size-7"})):(s(),b(le,{key:1,user:i.from_user.name,size:"lg"},null,8,["user"]))]),e("div",null,[i.notification_text?(s(),r("div",{key:0,innerHTML:i.notification_text},null,8,ye)):(s(),r("div",ke,[e("span",Ce,h(i.from_user.full_name),1),e("span",null,h(o.__("mentioned you in {0}",[i.reference_doctype])),1),e("span",we,h(i.reference_name),1)])),e("div",$e,h(o.__(t(ie)(i.creation))),1)])]),_:2},1032,["to","onClick"]))),128))])):(s(),r("div",Le,[n(j,{class:"h-20 w-20 text-gray-300"}),e("div",Ne,h(o.__("No new notifications")),1)]))])],512)):C("",!0)}}},ze={class:"flex-1 overflow-y-auto"},Be={class:"mb-3 flex flex-col"},Ae={key:1,class:"absolute -left-1.5 top-1 z-20 h-[5px] w-[5px] translate-x-6 translate-y-1 rounded-full bg-gray-800 ring-1 ring-white"},De={key:0,class:"mx-2 my-2 h-1 border-b"},Pe=["onClick"],Se={class:"flex flex-col"},Me={class:"m-2 flex flex-col gap-1"},Te={class:"grid h-4.5 w-4.5 flex-shrink-0 place-items-center"},Oe={__name:"AppSidebar",setup(v){const{getPinnedViews:_,getPublicViews:m}=de(),{toggle:y}=u(),c=ce("isSidebarCollapsed",!1),w=[{label:"Leads",icon:B,to:"Leads"},{label:"Deals",icon:A,to:"Deals"},{label:"Contacts",icon:D,to:"Contacts"},{label:"Organizations",icon:P,to:"Organizations"},{label:"Notes",icon:S,to:"Notes"},{label:"Tasks",icon:ee,to:"Tasks"},{label:"Call Logs",icon:O,to:"Call Logs"},{label:"Email Templates",icon:H,to:"Email Templates"},...te],$=J(()=>{let a=[{name:"All Views",hideLabel:!0,opened:!0,views:w}];return m().length&&a.push({name:"Public views",opened:!0,views:o(m())}),_().length&&a.push({name:"Pinned views",opened:!0,views:o(_())}),a});function o(a){return a.map(l=>({label:l.label,icon:p(l.route_name,l.icon),to:{name:l.route_name,params:{viewType:l.type||"list"},query:{view:l.name}}}))}function p(a,l){if(l)return Q("div",{class:"size-auto"},l);switch(a){case"Leads":return B;case"Deals":return A;case"Contacts":return D;case"Organizations":return P;case"Notes":return S;case"Call Logs":return O;default:return X(a)||W}}return(a,l)=>{const L=k("Badge");return s(),r("div",{class:x(["relative flex h-full flex-col justify-between transition-all duration-300 ease-in-out",t(c)?"w-12":"w-[220px]"])},[e("div",null,[n(q,{class:"p-2",isCollapsed:t(c)},null,8,["isCollapsed"])]),e("div",ze,[e("div",Be,[n(N,{id:"notifications-btn",label:a.__("Notifications"),icon:j,isCollapsed:t(c),onClick:l[0]||(l[0]=()=>t(y)()),class:"relative mx-2 my-0.5"},{right:f(()=>[!t(c)&&t(u)().unreadNotificationsCount?(s(),b(L,{key:0,label:t(u)().unreadNotificationsCount,variant:"subtle"},null,8,["label"])):t(u)().unreadNotificationsCount?(s(),r("div",Ae)):C("",!0)]),_:1},8,["label","isCollapsed"])]),(s(!0),r(I,null,z($.value,d=>{var i;return s(),r("div",{key:d.label},[!d.hideLabel&&t(c)&&((i=d.views)!=null&&i.length)?(s(),r("div",De)):C("",!0),n(F,{label:d.name,hideLabel:d.hideLabel,isOpened:d.opened},{header:f(({opened:g,hide:E,toggle:R})=>[E?C("",!0):(s(),r("div",{key:0,class:x(["flex cursor-pointer gap-1.5 px-1 text-base font-medium text-gray-600 transition-all duration-300 ease-in-out",t(c)?"ml-0 h-0 overflow-hidden opacity-0":"ml-2 mt-4 h-7 w-auto opacity-100"]),onClick:We=>R()},[n(t(Z),{name:"chevron-right",class:x(["h-4 text-gray-900 transition-all duration-300 ease-in-out",{"rotate-90":g}])},null,8,["class"]),e("span",null,h(a.__(d.name)),1)],10,Pe))]),default:f(()=>[e("nav",Se,[(s(!0),r(I,null,z(d.views,g=>(s(),b(N,{icon:g.icon,label:a.__(g.label),to:g.to,isCollapsed:t(c),class:"mx-2 my-0.5"},null,8,["icon","label","to","isCollapsed"]))),256))])]),_:2},1032,["label","hideLabel","isOpened"])])}),128))]),e("div",Me,[n(N,{label:t(c)?a.__("Expand"):a.__("Collapse"),isCollapsed:t(c),onClick:l[1]||(l[1]=d=>c.value=!t(c)),class:""},{icon:f(()=>[e("span",Te,[n(pe,{class:x(["h-4.5 w-4.5 text-gray-700 duration-300 ease-in-out",{"[transform:rotateY(180deg)]":t(c)}])},null,8,["class"])])]),_:1},8,["label","isCollapsed"])]),n(Ie)],2)}}},Ve={class:"flex border-b pr-5"},je={class:"flex items-center justify-center"},Ee={__name:"AppHeader",setup(v){return(_,m)=>(s(),r("div",Ve,[m[0]||(m[0]=e("div",{id:"app-header",class:"flex-1"},null,-1)),e("div",je,[n(U)])]))}},Re={class:"flex h-screen w-screen"},Fe={class:"h-full border-r bg-gray-50"},He={class:"flex-1 flex flex-col h-full overflow-auto"},ht={__name:"DesktopLayout",setup(v){return(_,m)=>(s(),r("div",Re,[e("div",Fe,[n(Oe)]),e("div",He,[n(Ee),se(_.$slots,"default")])]))}};export{ht as default};
//# sourceMappingURL=DesktopLayout-ae01dd71.js.map
