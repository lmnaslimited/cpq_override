import{E}from"./EditIcon-a130850d.js";import{_ as N,D as j}from"./NestedPopover-545deb9d.js";import{_ as M,b as o,c as s,e as d,l as w,a as z,A as $,r as k,N as B,Y as S,t as g,d as n,q as D,X as T,u as h,aC as A,g as m,w as c,p,F as f,f as U,n as C,R as P,H as F,E as O}from"./index-d057f33a.js";import{_ as V,u as R,a as I}from"./UserAvatar-e49c5291.js";import{I as Z}from"./IndicatorIcon-c103771d.js";import{_ as L,D as K}from"./views-fe454bb1.js";const q={},H={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function X(a,i){return o(),s("svg",H,i[0]||(i[0]=[d("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M14 8C14 11.3137 11.3137 14 8 14C4.68629 14 2 11.3137 2 8C2 4.68629 4.68629 2 8 2C11.3137 2 14 4.68629 14 8ZM15 8C15 11.866 11.866 15 8 15C4.13401 15 1 11.866 1 8C1 4.13401 4.13401 1 8 1C11.866 1 15 4.13401 15 8ZM11.2909 5.98482C11.4666 5.77175 11.4363 5.45663 11.2232 5.28096C11.0101 5.1053 10.695 5.13561 10.5193 5.34868L7.07001 9.53239L5.72845 7.79857C5.55946 7.58018 5.24543 7.54012 5.02703 7.70911C4.80863 7.8781 4.76858 8.19214 4.93756 8.41053L6.66217 10.6394C6.7552 10.7596 6.89788 10.831 7.04988 10.8334C7.20188 10.8357 7.3467 10.7688 7.4434 10.6515L11.2909 5.98482Z",fill:"currentColor"},null,-1)]))}const Y=M(q,[["render",X]]),G={class:"group flex w-full items-center justify-between rounded bg-transparent p-1 pl-2 text-base text-gray-800 transition-colors hover:bg-gray-200 active:bg-gray-300"},J={class:"flex items-center justify-between gap-7"},Q={class:"actions flex items-center justify-center"},W={__name:"DropdownItem",props:{option:{type:Object,default:()=>{}}},setup(a){const i=a,r=w(!1),l=w(!1),_=w(null);z(()=>{var b;(b=i.option)!=null&&b.value||(r.value=!0,l.value=!0,$(()=>_.value.el.focus()))});const y=()=>{r.value=!r.value,r.value&&$(()=>_.value.el.focus())},x=()=>{y(),i.option.onSave(i.option,l.value),l.value=!1};return(b,u)=>{const e=k("Button"),t=k("FeatherIcon");return o(),s("div",G,[d("div",J,[B(d("div",null,g(a.option.value),513),[[S,!r.value]]),B(n(h(A),{ref_key:"inputRef",ref:_,modelValue:a.option.value,"onUpdate:modelValue":u[0]||(u[0]=v=>a.option.value=v),class:"w-full",placeholder:a.option.placeholder,onBlur:D(x,["stop"]),onKeydown:u[1]||(u[1]=T(D(v=>v.target.blur(),["stop"]),["enter"]))},null,8,["modelValue","placeholder"]),[[S,r.value]]),d("div",Q,[!l.value&&!a.option.selected?(o(),m(h(V),{key:0,text:"Set As Primary"},{default:c(()=>[d("div",null,[n(e,{variant:"ghost",size:"sm",class:"opacity-0 hover:bg-gray-300 group-hover:opacity-100",onClick:a.option.onClick},{default:c(()=>[n(Y)]),_:1},8,["onClick"])])]),_:1})):p("",!0),n(h(V),{text:"Edit"},{default:c(()=>[d("div",null,[n(e,{variant:"ghost",size:"sm",class:"opacity-0 hover:bg-gray-300 group-hover:opacity-100",onClick:y},{default:c(()=>[n(E)]),_:1})])]),_:1}),n(h(V),{text:"Delete"},{default:c(()=>[d("div",null,[n(e,{variant:"ghost",icon:"x",size:"sm",class:"opacity-0 hover:bg-gray-300 group-hover:opacity-100",onClick:u[2]||(u[2]=()=>a.option.onDelete(a.option,l.value))})])]),_:1})])]),d("div",null,[a.option.selected?(o(),m(t,{key:0,name:"check",class:"text-primary-500 h-4 w-6",size:"sm"})):p("",!0)])])}}};const ee={class:"flex flex-col gap-4"},ae={key:0,class:"flex h-7 mb-3 max-w-fit cursor-pointer items-center gap-2 text-base font-semibold leading-5"},te={key:0,class:"settings-field"},oe={key:0,class:"mb-2 text-sm text-gray-600"},ne={key:0,class:"text-red-500"},le={key:3,class:"flex items-center gap-2"},se=["onClick"],re={key:0,class:"text-red-500"},ce={key:4,class:"flex gap-1"},de={class:"cursor-pointer"},ue={key:6},me={class:"truncate"},ie={class:"my-2 space-y-1.5 divide-y rounded-lg border border-gray-100 bg-white p-1.5 shadow-xl"},ye={key:1},he={class:"p-1.5 px-7 text-base text-gray-500"},pe={class:"pt-1.5"},ve={__name:"Fields",props:{sections:Array,data:Object},setup(a){const{getUser:i}=R(),r=l=>l.placeholder?__(l.placeholder):["Select","Link"].includes(l.type)?__("Select {0}",[__(l.label)]):__("Enter {0}",[__(l.label)]);return(l,_)=>{const y=k("FormControl"),x=k("Button"),b=k("FeatherIcon");return o(),s("div",ee,[(o(!0),s(f,null,U(a.sections,u=>(o(),s("div",{key:u.label,class:C(["section first:border-t-0 first:pt-0",u.hideBorder?"":"border-t pt-4"])},[u.hideLabel?p("",!0):(o(),s("div",ae,g(u.label),1)),d("div",{class:C(["grid gap-4",u.columns?"grid-cols-"+u.columns:"grid-cols-2 sm:grid-cols-3"])},[(o(!0),s(f,null,U(u.fields,e=>(o(),s("div",{key:e.name},[(e.type=="Check"||e.read_only&&a.data[e.name]||!e.read_only||!e.hidden)&&(!e.depends_on||e.display_via_depends_on)?(o(),s("div",te,[P(l.$slots,"custom-fields",{field:e,data:a.data},()=>[e.type!="Check"?(o(),s("div",oe,[F(g(l.__(e.label))+" ",1),e.mandatory||e.mandatory_depends_on&&e.mandatory_via_depends_on?(o(),s("span",ne,"*")):p("",!0)])):p("",!0),e.read_only&&e.type!=="Check"?(o(),m(y,{key:1,type:"text",placeholder:r(e),modelValue:a.data[e.name],"onUpdate:modelValue":t=>a.data[e.name]=t,disabled:!0},null,8,["placeholder","modelValue","onUpdate:modelValue"])):e.type==="Select"?(o(),m(y,{key:2,type:"select",class:C(["form-control",e.prefix?"prefix":""]),options:e.options,modelValue:a.data[e.name],"onUpdate:modelValue":t=>a.data[e.name]=t,placeholder:r(e)},O({_:2},[e.prefix?{name:"prefix",fn:c(()=>[n(Z,{class:C(e.prefix)},null,8,["class"])]),key:"0"}:void 0]),1032,["class","options","modelValue","onUpdate:modelValue","placeholder"])):e.type=="Check"?(o(),s("div",le,[n(y,{class:"form-control",type:"checkbox",modelValue:a.data[e.name],"onUpdate:modelValue":t=>a.data[e.name]=t,onChange:t=>a.data[e.name]=t.target.checked,disabled:!!e.read_only},null,8,["modelValue","onUpdate:modelValue","onChange","disabled"]),d("label",{class:"text-sm text-gray-600",onClick:t=>a.data[e.name]=!a.data[e.name]},[F(g(l.__(e.label))+" ",1),e.mandatory?(o(),s("span",re,"*")):p("",!0)],8,se)])):e.type==="Link"?(o(),s("div",ce,[n(L,{class:"form-control flex-1",value:a.data[e.name],doctype:e.options,filters:e.filters,onChange:t=>a.data[e.name]=t,placeholder:r(e),onCreate:e.create},null,8,["value","doctype","filters","onChange","placeholder","onCreate"]),a.data[e.name]&&e.edit?(o(),m(x,{key:0,class:"shrink-0",label:l.__("Edit"),onClick:t=>e.edit(a.data[e.name])},{prefix:c(()=>[n(E,{class:"h-4 w-4"})]),_:2},1032,["label","onClick"])):p("",!0)])):e.type==="User"?(o(),m(L,{key:5,class:"form-control",value:h(i)(a.data[e.name]).full_name,doctype:e.options,filters:e.filters,onChange:t=>a.data[e.name]=t,placeholder:r(e),hideMe:!0},{prefix:c(()=>[n(I,{class:"mr-2",user:a.data[e.name],size:"sm"},null,8,["user"])]),"item-prefix":c(({option:t})=>[n(I,{class:"mr-2",user:t.value,size:"sm"},null,8,["user"])]),"item-label":c(({option:t})=>[n(h(V),{text:t.value},{default:c(()=>[d("div",de,g(h(i)(t.value).full_name),1)]),_:2},1032,["text"])]),_:2},1032,["value","doctype","filters","onChange","placeholder"])):e.type==="Dropdown"?(o(),s("div",ue,[n(N,null,{target:c(({open:t})=>[n(x,{label:a.data[e.name],class:"dropdown-button flex w-full items-center justify-between rounded border border-gray-100 bg-gray-100 px-2 py-1.5 text-base text-gray-800 placeholder-gray-500 transition-colors hover:border-gray-200 hover:bg-gray-200 focus:border-gray-500 focus:bg-white focus:shadow-sm focus:outline-none focus:ring-0 focus-visible:ring-2 focus-visible:ring-gray-400"},{suffix:c(()=>[n(b,{name:t?"chevron-up":"chevron-down",class:"h-4 text-gray-600"},null,8,["name"])]),default:c(()=>[d("div",me,g(a.data[e.name]),1)]),_:2},1032,["label"])]),body:c(()=>{var t;return[d("div",ie,[d("div",null,[(t=e.options)!=null&&t.length?(o(!0),s(f,{key:0},U(e.options,v=>(o(),m(W,{key:v.name,option:v},null,8,["option"]))),128)):(o(),s("div",ye,[d("div",he,g(l.__("No {0} Available",[e.label])),1)]))]),d("div",pe,[n(x,{variant:"ghost",class:"w-full !justify-start",label:l.__("Create New"),onClick:v=>e.create()},{prefix:c(()=>[n(b,{name:"plus",class:"h-4"})]),_:2},1032,["label","onClick"])])])]}),_:2},1024)])):e.type==="Datetime"?(o(),m(h(K),{key:7,modelValue:a.data[e.name],"onUpdate:modelValue":t=>a.data[e.name]=t,placeholder:r(e),"input-class":"border-none"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):e.type==="Date"?(o(),m(h(j),{key:8,modelValue:a.data[e.name],"onUpdate:modelValue":t=>a.data[e.name]=t,placeholder:r(e),"input-class":"border-none"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):["Small Text","Text","Long Text"].includes(e.type)?(o(),m(y,{key:9,type:"textarea",placeholder:r(e),modelValue:a.data[e.name],"onUpdate:modelValue":t=>a.data[e.name]=t},null,8,["placeholder","modelValue","onUpdate:modelValue"])):["Int"].includes(e.type)?(o(),m(y,{key:10,type:"number",placeholder:r(e),modelValue:a.data[e.name],"onUpdate:modelValue":t=>a.data[e.name]=t},null,8,["placeholder","modelValue","onUpdate:modelValue"])):(o(),m(y,{key:11,type:"text",placeholder:r(e),modelValue:a.data[e.name],"onUpdate:modelValue":t=>a.data[e.name]=t,disabled:!!e.read_only},null,8,["placeholder","modelValue","onUpdate:modelValue","disabled"]))],!0)])):p("",!0)]))),128))],2)],2))),128))])}}},Ve=M(ve,[["__scopeId","data-v-044f937e"]]);export{Ve as F,Y as S};
//# sourceMappingURL=Fields-6a34413d.js.map
