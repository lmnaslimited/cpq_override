{"version":3,"file":"SLASection-51b98e40.js","sources":["../../../../frontend/src/components/SLASection.vue"],"sourcesContent":["<template>\n  <div class=\"flex flex-col gap-1.5 border-b sm:px-6 py-3 px-4\">\n    <div\n      v-for=\"s in slaSection\"\n      :key=\"s.label\"\n      class=\"flex items-center gap-2 text-base leading-5\"\n    >\n      <div class=\"sm:w-[106px] w-36 text-sm text-gray-600\">\n        {{ __(s.label) }}\n      </div>\n      <div class=\"grid min-h-[28px] items-center\">\n        <Tooltip v-if=\"s.tooltipText\" :text=\"__(s.tooltipText)\">\n          <div class=\"ml-2 cursor-pointer\">\n            <Badge\n              v-if=\"s.type == 'Badge'\"\n              class=\"-ml-1\"\n              :label=\"s.value\"\n              variant=\"subtle\"\n              :theme=\"s.color\"\n            />\n            <div v-else>{{ s.value }}</div>\n          </div>\n        </Tooltip>\n        <Dropdown\n          class=\"form-control\"\n          v-if=\"s.type == 'Select'\"\n          :options=\"s.options\"\n        >\n          <template #default=\"{ open }\">\n            <Button :label=\"s.value\">\n              <template #suffix>\n                <FeatherIcon\n                  :name=\"open ? 'chevron-up' : 'chevron-down'\"\n                  class=\"h-4\"\n                />\n              </template>\n            </Button>\n          </template>\n        </Dropdown>\n      </div>\n    </div>\n  </div>\n</template>\n<script setup>\nimport { Dropdown, Tooltip } from 'frappe-ui'\nimport { timeAgo, dateFormat, formatTime, dateTooltipFormat } from '@/utils'\nimport { statusesStore } from '@/stores/statuses'\nimport { capture } from '@/telemetry'\nimport { computed, defineModel } from 'vue'\n\nconst data = defineModel()\nconst emit = defineEmits(['updateField'])\n\nconst { communicationStatuses } = statusesStore()\n\nlet slaSection = computed(() => {\n  let sections = []\n  let status = data.value.sla_status\n  let tooltipText = status\n  let color =\n    data.value.sla_status == 'Failed'\n      ? 'red'\n      : data.value.sla_status == 'Fulfilled'\n        ? 'green'\n        : 'orange'\n\n  if (status == 'First Response Due') {\n    status = timeAgo(data.value.response_by)\n    if (status == 'just now') {\n      status = 'In less than a minute'\n    }\n    tooltipText = dateFormat(data.value.response_by, dateTooltipFormat)\n    if (new Date(data.value.response_by) < new Date()) {\n      color = 'red'\n      if (status == __('In less than a minute')) {\n        status = 'less than a minute ago'\n      }\n    }\n  } else if (['Fulfilled', 'Failed'].includes(status)) {\n    status = __(status) + ' in ' + formatTime(data.value.first_response_time)\n    tooltipText = dateFormat(data.value.first_responded_on, dateTooltipFormat)\n  }\n\n  sections.push(\n    ...[\n      {\n        label: 'First Response',\n        type: 'Badge',\n        value: __(status),\n        tooltipText: tooltipText,\n        color: color,\n      },\n      {\n        label: 'Status',\n        value: data.value.communication_status,\n        type: 'Select',\n        options: communicationStatuses.data?.map((status) => ({\n          label: status.name,\n          value: status.name,\n          onClick: () => {\n            capture('sla_status_change')\n            emit('updateField', 'communication_status', status.name)\n          },\n        })),\n      },\n    ],\n  )\n  return sections\n})\n</script>\n\n<style scoped>\n:deep(.form-control button) {\n  border-color: transparent;\n  background: white;\n}\n</style>\n"],"names":["data","_useModel","__props","emit","__emit","communicationStatuses","statusesStore","slaSection","computed","sections","status","tooltipText","color","timeAgo","dateFormat","dateTooltipFormat","formatTime","_a","capture"],"mappings":"itBAkDA,MAAMA,EAAOC,EAAYC,EAAA,YAAA,EACnBC,EAAOC,EAEP,CAAE,sBAAAC,CAAuB,EAAGC,EAAc,EAEhD,IAAIC,EAAaC,EAAS,IAAM,OAC9B,IAAIC,EAAW,CAAC,EACZC,EAASV,EAAK,MAAM,WACpBW,EAAcD,EACdE,EACFZ,EAAK,MAAM,YAAc,SACrB,MACAA,EAAK,MAAM,YAAc,YACvB,QACA,SAER,OAAIU,GAAU,sBACZA,EAASG,EAAQb,EAAK,MAAM,WAAW,EACnCU,GAAU,aACZA,EAAS,yBAEXC,EAAcG,EAAWd,EAAK,MAAM,YAAae,CAAiB,EAC9D,IAAI,KAAKf,EAAK,MAAM,WAAW,EAAI,IAAI,OACzCY,EAAQ,MACJF,GAAU,GAAG,uBAAuB,IACtCA,EAAS,4BAGJ,CAAC,YAAa,QAAQ,EAAE,SAASA,CAAM,IAChDA,EAAS,GAAGA,CAAM,EAAI,OAASM,EAAWhB,EAAK,MAAM,mBAAmB,EACxEW,EAAcG,EAAWd,EAAK,MAAM,mBAAoBe,CAAiB,GAG3EN,EAAS,KAEL,CACE,MAAO,iBACP,KAAM,QACN,MAAO,GAAGC,CAAM,EAChB,YAAaC,EACb,MAAOC,CACR,EACD,CACE,MAAO,SACP,MAAOZ,EAAK,MAAM,qBAClB,KAAM,SACN,SAASiB,EAAAZ,EAAsB,OAAtB,YAAAY,EAA4B,IAAKP,IAAY,CACpD,MAAOA,EAAO,KACd,MAAOA,EAAO,KACd,QAAS,IAAM,CACbQ,EAAQ,mBAAmB,EAC3Bf,EAAK,cAAe,uBAAwBO,EAAO,IAAI,CACxD,CACX,GACO,CAEL,EACOD,CACT,CAAC"}