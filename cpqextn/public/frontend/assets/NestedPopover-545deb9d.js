import{aa as Z,l as x,j as C,as as ee,ag as n,cN as te,ao as j,ae as ce,cO as Pe,cP as H,cQ as Se,cR as _e,af as ae,cS as we,cT as xe,cU as ke,cV as De,B as V,ah as le,F as N,aj as R,a as pe,ak as de,am as Me,cW as ve,ac as Q,ab as X,at as Y,au as F,cX as Ce,an as oe,al as ne,ap as B,cY as E,aq as J,_ as Ie,aB as Fe,W as Ee,a8 as Ve,D as Be,aC as Oe,r as L,b as O,g as fe,w as T,d as k,C as Ye,e as M,t as K,c as G,f as z,n as Te,o as $e,u as q,R as se,S as ue,U as ie,N as Ae,Y as Ne,A as je,aH as Le}from"./index-d057f33a.js";var Ge=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Ge||{});let he=Symbol("PopoverContext");function re(e){let i=ne(he,null);if(i===null){let u=new Error(`<${e} /> is missing a parent <${ye.name} /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(u,re),u}return i}let Re=Symbol("PopoverGroupContext");function ge(){return ne(Re,null)}let me=Symbol("PopoverPanelContext");function Ue(){return ne(me,null)}let ye=Z({name:"Popover",inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"}},setup(e,{slots:i,attrs:u,expose:g}){var b;let r=x(null);g({el:r,$el:r});let l=x(1),t=x(null),P=x(null),S=x(null),c=x(null),d=C(()=>ee(r)),m=C(()=>{var a,s;if(!n(t)||!n(c))return!1;for(let W of document.querySelectorAll("body > *"))if(Number(W==null?void 0:W.contains(n(t)))^Number(W==null?void 0:W.contains(n(c))))return!0;let o=te(),y=o.indexOf(n(t)),D=(y+o.length-1)%o.length,I=(y+1)%o.length,U=o[D],be=o[I];return!((a=n(c))!=null&&a.contains(U))&&!((s=n(c))!=null&&s.contains(be))}),v={popoverState:l,buttonId:x(null),panelId:x(null),panel:c,button:t,isPortalled:m,beforePanelSentinel:P,afterPanelSentinel:S,togglePopover(){l.value=j(l.value,{0:1,1:0})},closePopover(){l.value!==1&&(l.value=1)},close(a){v.closePopover();let s=(()=>a?a instanceof HTMLElement?a:a.value instanceof HTMLElement?n(a):n(v.button):n(v.button))();s==null||s.focus()}};ce(he,v),Pe(C(()=>j(l.value,{0:H.Open,1:H.Closed})));let _={buttonId:v.buttonId,panelId:v.panelId,close(){v.closePopover()}},w=ge(),$=w==null?void 0:w.registerPopover,[A,f]=Se(),h=_e({mainTreeNodeRef:w==null?void 0:w.mainTreeNodeRef,portals:A,defaultContainers:[t,c]});function p(){var a,s,o,y;return(y=w==null?void 0:w.isFocusWithinPopoverGroup())!=null?y:((a=d.value)==null?void 0:a.activeElement)&&(((s=n(t))==null?void 0:s.contains(d.value.activeElement))||((o=n(c))==null?void 0:o.contains(d.value.activeElement)))}return ae(()=>$==null?void 0:$(_)),we((b=d.value)==null?void 0:b.defaultView,"focus",a=>{var s,o;a.target!==window&&a.target instanceof HTMLElement&&l.value===0&&(p()||t&&c&&(h.contains(a.target)||(s=n(v.beforePanelSentinel))!=null&&s.contains(a.target)||(o=n(v.afterPanelSentinel))!=null&&o.contains(a.target)||v.closePopover()))},!0),xe(h.resolveContainers,(a,s)=>{var o;v.closePopover(),ke(s,De.Loose)||(a.preventDefault(),(o=n(t))==null||o.focus())},C(()=>l.value===0)),()=>{let a={open:l.value===0,close:v.close};return V(N,[V(f,{},()=>le({theirProps:{...e,...u},ourProps:{ref:r},slot:a,slots:i,attrs:u,name:"Popover"})),V(h.MainTreeNode)])}}}),We=Z({name:"PopoverButton",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:null}},inheritAttrs:!1,setup(e,{attrs:i,slots:u,expose:g}){var b;let r=(b=e.id)!=null?b:`headlessui-popover-button-${R()}`,l=re("PopoverButton"),t=C(()=>ee(l.button));g({el:l.button,$el:l.button}),pe(()=>{l.buttonId.value=r}),de(()=>{l.buttonId.value=null});let P=ge(),S=P==null?void 0:P.closeOthers,c=Ue(),d=C(()=>c===null?!1:c.value===l.panelId.value),m=x(null),v=`headlessui-focus-sentinel-${R()}`;d.value||ae(()=>{l.button.value=n(m)});let _=Me(C(()=>({as:e.as,type:i.type})),m);function w(a){var s,o,y,D,I;if(d.value){if(l.popoverState.value===1)return;switch(a.key){case B.Space:case B.Enter:a.preventDefault(),(o=(s=a.target).click)==null||o.call(s),l.closePopover(),(y=n(l.button))==null||y.focus();break}}else switch(a.key){case B.Space:case B.Enter:a.preventDefault(),a.stopPropagation(),l.popoverState.value===1&&(S==null||S(l.buttonId.value)),l.togglePopover();break;case B.Escape:if(l.popoverState.value!==0)return S==null?void 0:S(l.buttonId.value);if(!n(l.button)||(D=t.value)!=null&&D.activeElement&&!((I=n(l.button))!=null&&I.contains(t.value.activeElement)))return;a.preventDefault(),a.stopPropagation(),l.closePopover();break}}function $(a){d.value||a.key===B.Space&&a.preventDefault()}function A(a){var s,o;e.disabled||(d.value?(l.closePopover(),(s=n(l.button))==null||s.focus()):(a.preventDefault(),a.stopPropagation(),l.popoverState.value===1&&(S==null||S(l.buttonId.value)),l.togglePopover(),(o=n(l.button))==null||o.focus()))}function f(a){a.preventDefault(),a.stopPropagation()}let h=ve();function p(){let a=n(l.panel);if(!a)return;function s(){j(h.value,{[E.Forwards]:()=>Y(a,F.First),[E.Backwards]:()=>Y(a,F.Last)})===J.Error&&Y(te().filter(o=>o.dataset.headlessuiFocusGuard!=="true"),j(h.value,{[E.Forwards]:F.Next,[E.Backwards]:F.Previous}),{relativeTo:n(l.button)})}s()}return()=>{let a=l.popoverState.value===0,s={open:a},{...o}=e,y=d.value?{ref:m,type:_.value,onKeydown:w,onClick:A}:{ref:m,id:r,type:_.value,"aria-expanded":l.popoverState.value===0,"aria-controls":n(l.panel)?l.panelId.value:void 0,disabled:e.disabled?!0:void 0,onKeydown:w,onKeyup:$,onClick:A,onMousedown:f};return V(N,[le({ourProps:y,theirProps:{...i,...o},slot:s,attrs:i,slots:u,name:"PopoverButton"}),a&&!d.value&&l.isPortalled.value&&V(Q,{id:v,features:X.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:p})])}}}),He=Z({name:"PopoverPanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},focus:{type:Boolean,default:!1},id:{type:String,default:null}},inheritAttrs:!1,setup(e,{attrs:i,slots:u,expose:g}){var b;let r=(b=e.id)!=null?b:`headlessui-popover-panel-${R()}`,{focus:l}=e,t=re("PopoverPanel"),P=C(()=>ee(t.panel)),S=`headlessui-focus-sentinel-before-${R()}`,c=`headlessui-focus-sentinel-after-${R()}`;g({el:t.panel,$el:t.panel}),pe(()=>{t.panelId.value=r}),de(()=>{t.panelId.value=null}),ce(me,t.panelId),ae(()=>{var f,h;if(!l||t.popoverState.value!==0||!t.panel)return;let p=(f=P.value)==null?void 0:f.activeElement;(h=n(t.panel))!=null&&h.contains(p)||Y(n(t.panel),F.First)});let d=Ce(),m=C(()=>d!==null?(d.value&H.Open)===H.Open:t.popoverState.value===0);function v(f){var h,p;switch(f.key){case B.Escape:if(t.popoverState.value!==0||!n(t.panel)||P.value&&!((h=n(t.panel))!=null&&h.contains(P.value.activeElement)))return;f.preventDefault(),f.stopPropagation(),t.closePopover(),(p=n(t.button))==null||p.focus();break}}function _(f){var h,p,a,s,o;let y=f.relatedTarget;y&&n(t.panel)&&((h=n(t.panel))!=null&&h.contains(y)||(t.closePopover(),((a=(p=n(t.beforePanelSentinel))==null?void 0:p.contains)!=null&&a.call(p,y)||(o=(s=n(t.afterPanelSentinel))==null?void 0:s.contains)!=null&&o.call(s,y))&&y.focus({preventScroll:!0})))}let w=ve();function $(){let f=n(t.panel);if(!f)return;function h(){j(w.value,{[E.Forwards]:()=>{var p;Y(f,F.First)===J.Error&&((p=n(t.afterPanelSentinel))==null||p.focus())},[E.Backwards]:()=>{var p;(p=n(t.button))==null||p.focus({preventScroll:!0})}})}h()}function A(){let f=n(t.panel);if(!f)return;function h(){j(w.value,{[E.Forwards]:()=>{let p=n(t.button),a=n(t.panel);if(!p)return;let s=te(),o=s.indexOf(p),y=s.slice(0,o+1),D=[...s.slice(o+1),...y];for(let I of D.slice())if(I.dataset.headlessuiFocusGuard==="true"||a!=null&&a.contains(I)){let U=D.indexOf(I);U!==-1&&D.splice(U,1)}Y(D,F.First,{sorted:!1})},[E.Backwards]:()=>{var p;Y(f,F.Previous)===J.Error&&((p=n(t.button))==null||p.focus())}})}h()}return()=>{let f={open:t.popoverState.value===0,close:t.close},{focus:h,...p}=e,a={ref:t.panel,id:r,onKeydown:v,onFocusout:l&&t.popoverState.value===0?_:void 0,tabIndex:-1};return le({ourProps:a,theirProps:{...i,...p},attrs:i,slot:f,slots:{...u,default:(...s)=>{var o;return[V(N,[m.value&&t.isPortalled.value&&V(Q,{id:S,ref:t.beforePanelSentinel,features:X.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:$}),(o=u.default)==null?void 0:o.call(u,...s),m.value&&t.isPortalled.value&&V(Q,{id:c,ref:t.afterPanelSentinel,features:X.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:A})])]}},features:oe.RenderStrategy|oe.Static,visible:m.value,name:"PopoverPanel"})}}});const Ke={name:"DatePicker",props:{value:{type:String},modelValue:{type:String},placeholder:{type:String},formatter:{type:Function,default:null},readonly:{type:Boolean},inputClass:{type:[String,Array,Object]}},emits:["update:modelValue","change"],components:{Popover:Fe,Input:Ee,Button:Ve,FeatherIcon:Be,TextInput:Oe},data(){return{currentYear:null,currentMonth:null}},created(){this.selectCurrentMonthYear()},computed:{today(){return this.getDate()},datesAsWeeks(){let e=[],i=this.dates.slice();for(;i.length;){let u=i.splice(0,7);e.push(u)}return e},dates(){if(!(this.currentYear&&this.currentMonth))return[];let e=this.currentMonth-1,i=this.currentYear,u=this.getDate(i,e,1),g=this.getDate(i,e+1,0),b=u.getDay(),r=6-g.getDay(),l=this.getDatesAfter(u,-b),t=this.getDatesAfter(g,r),P=this.getDaysInMonth(e,i),S=this.getDatesAfter(u,P-1),c=[...l,u,...S,...t];if(c.length<42){const d=this.getDatesAfter(c.at(-1),42-c.length);c=c.concat(...d)}return c},formatMonth(){let e=this.getDate(this.currentYear,this.currentMonth-1,1);return`${e.toLocaleString("en-US",{month:"long"})}, ${e.getFullYear()}`},dateValue(){return this.value?this.value:this.modelValue}},methods:{selectDate(e){this.$emit("change",this.toValue(e)),this.$emit("update:modelValue",this.toValue(e))},selectCurrentMonthYear(){let e=this.dateValue?this.getDate(this.dateValue):this.getDate();e==="Invalid Date"&&(e=this.getDate()),this.currentYear=e.getFullYear(),this.currentMonth=e.getMonth()+1},prevMonth(){this.changeMonth(-1)},nextMonth(){this.changeMonth(1)},changeMonth(e){this.currentMonth=this.currentMonth+e,this.currentMonth<1&&(this.currentMonth=12,this.currentYear=this.currentYear-1),this.currentMonth>12&&(this.currentMonth=1,this.currentYear=this.currentYear+1)},getDatesAfter(e,i){let u=1;i<0&&(u=-1,i=Math.abs(i));let g=[];for(;i;)e=this.getDate(e.getFullYear(),e.getMonth(),e.getDate()+u),g.push(e),i--;return u===-1?g.reverse():g},getDaysInMonth(e,i){let g=[31,28,31,30,31,30,31,31,30,31,30,31][e];return e===1&&this.isLeapYear(i)?29:g},isLeapYear(e){return e%400===0?!0:e%100===0?!1:e%4===0},toValue(e){return e?(e.setHours(0,-e.getTimezoneOffset(),0,0),e.toISOString().slice(0,10)):""},getDate(...e){return new Date(...e)}}},ze={class:"mt-2 w-fit select-none divide-y rounded-lg bg-white text-base shadow-2xl ring-1 ring-black ring-opacity-5 focus:outline-none"},qe={class:"flex items-center p-1 text-gray-500"},Qe={class:"flex-1 text-center text-base font-medium text-gray-700"},Xe={class:"flex items-center justify-center gap-1 p-1"},Je={class:"flex flex-col items-center justify-center p-1 text-gray-800"},Ze={class:"flex items-center text-xs uppercase"},et=["onClick"],tt={class:"flex justify-end p-1"};function at(e,i,u,g,b,r){const l=L("Input"),t=L("FeatherIcon"),P=L("Button"),S=L("TextInput"),c=L("Popover");return O(),fe(c,{onOpen:r.selectCurrentMonthYear,class:"flex w-full [&>div:first-child]:w-full"},{target:T(({togglePopover:d})=>[k(l,Ye({readonly:"",type:"text","icon-left":"calendar",placeholder:u.placeholder,value:r.dateValue&&u.formatter?u.formatter(r.dateValue):r.dateValue,onFocus:m=>u.readonly?null:d(),class:["w-full",u.inputClass]},e.$attrs),null,16,["placeholder","value","onFocus","class"])]),body:T(({togglePopover:d})=>[M("div",ze,[M("div",qe,[k(P,{variant:"ghost",class:"h-7 w-7",onClick:r.prevMonth},{default:T(()=>[k(t,{"stroke-width":2,name:"chevron-left",class:"h-4 w-4"})]),_:1},8,["onClick"]),M("div",Qe,K(r.formatMonth),1),k(P,{variant:"ghost",class:"h-7 w-7",onClick:r.nextMonth},{default:T(()=>[k(t,{"stroke-width":2,name:"chevron-right",class:"h-4 w-4"})]),_:1},8,["onClick"])]),M("div",Xe,[k(S,{class:"text-sm",type:"text",value:r.dateValue,onChange:m=>r.selectDate(r.getDate(m.target.value))||d()},null,8,["value","onChange"]),k(P,{label:"Today",class:"text-sm",onClick:m=>r.selectDate(r.getDate())||d()},null,8,["onClick"])]),M("div",Je,[M("div",Ze,[(O(),G(N,null,z(["su","mo","tu","we","th","fr","sa"],(m,v)=>M("div",{class:"flex h-6 w-8 items-center justify-center text-center",key:v},K(m),1)),64))]),(O(!0),G(N,null,z(r.datesAsWeeks,(m,v)=>(O(),G("div",{class:"flex items-center",key:v},[(O(!0),G(N,null,z(m,_=>(O(),G("div",{key:r.toValue(_),class:Te(["flex h-8 w-8 cursor-pointer items-center justify-center rounded hover:bg-gray-50",{"text-gray-400":_.getMonth()!==b.currentMonth-1,"font-extrabold text-gray-900":r.toValue(_)===r.toValue(r.today),"bg-gray-800 text-white hover:bg-gray-800":r.toValue(_)===r.dateValue}]),onClick:()=>{r.selectDate(_),d()}},K(_.getDate()),11,et))),128))]))),128))]),M("div",tt,[k(P,{label:"Clear",class:"text-sm",onClick:()=>{r.selectDate(""),d()}},null,8,["onClick"])])])]),_:1},8,["onOpen"])}const nt=Ie(Ke,[["render",at]]),rt={__name:"NestedPopover",props:{placement:{type:String,default:"bottom-start"}},setup(e){const i=e,u=x(null),g=x(null);let b=x(null);function r(){b.value?b.value.update():b.value=Le(u.value.el,g.value.el,{placement:i.placement})}function l(){je(()=>r())}return $e(()=>{var t;(t=b.value)==null||t.destroy()}),(t,P)=>(O(),fe(q(ye),null,{default:T(({open:S})=>[k(q(We),{as:"div",ref_key:"reference",ref:u,onClick:l,onFocusin:l,onKeydown:l},{default:T(({open:c})=>[se(t.$slots,"target",ue(ie({open:c})))]),_:2},1536),Ae(M("div",null,[k(q(He),{ref_key:"popover",ref:g,static:"",class:"z-[100]"},{default:T(({open:c,close:d})=>[se(t.$slots,"body",ue(ie({open:c,close:d})))]),_:2},1536)],512),[[Ne,S]])]),_:3}))}};export{nt as D,rt as _};
//# sourceMappingURL=NestedPopover-545deb9d.js.map
